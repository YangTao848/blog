{"version":3,"sources":["demo1/carousel.js"],"names":["$","Carousel","poster","this","_self","find","posterItemMain","nextBtn","posterItems","length","append","eq","clone","children","zIndex","posterFirstItem","posterLastItem","last","rotateFlag","width","height","setting","posterWidth","posterHeight","scale","speed","extend","getSetting","console","log","setSettingValue","click","setPosterPos","carouselRotate","prevBtn","autoPlay","hover","window","timer","prototype","_this","setInterval","type","each","itemsArr","item","self","prev","get","next","opacity","css","top","left","itemObj","i","animate","data","w","Math","ceil","floor","sliceItems","slice","slength","rightItems","leftItems","level","rh","firstLeft","fixOffetLeft","rw","j","gap","setVertualAlign","lh","oloop","vertualType","posters","ele","init","carousel"],"mappings":"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","file":"carousel-3ac538df61.js","sourcesContent":[";(function ($) {\r\n    var Carousel = function (poster) {\r\n        var _self = this;\r\n        this.poster = poster;\r\n        this.posterItemMain = this.poster.find(\".poster-list\");\r\n        this.nextBtn = this.poster.find(\".poster-next-btn\");\r\n        this.prevBtn = this.poster.find(\".poster-pre-btn\");\r\n        this.posterItems = this.posterItemMain.find(\".poster-item\");\r\n\r\n        if(this.posterItems.length%2===0) {     /*偶数帧*/\r\n            this.posterItemMain.append(this.posterItems.eq(0).clone());\r\n            this.posterItems =this.posterItemMain.children();\r\n        }\r\n        this.zIndex = this.posterItems.length / 2;\r\n        this.posterFirstItem = this.posterItems.first();\r\n        this.posterLastItem = this.posterItems.last();\r\n        this.rotateFlag = true;\r\n\r\n        /*判断旋转动画是否执行完毕*/\r\n        this.setting = {\r\n             width: 1000, /*幻灯片宽度*/\r\n             height: 270, /*幻灯片高度*/\r\n             posterWidth: 640, /*第一帧宽度*/\r\n             posterHeight: 270, /*第一帧高度*/\r\n             scale: 0.9,        /*幻灯片的缩放比例*/\r\n             speed: 500,        /*动画速度，单位ms*/\r\n             delay:1500,        /*自动播放速度*/\r\n             autoPlay:false,\r\n             verticalAlign: \"middle\"\r\n        };\r\n        // console.log(this.setting);\r\n        // console.log(this.getSetting());\r\n        $.extend(this.setting, this.getSetting());\r\n        console.log(this.setting);\r\n        this.setSettingValue();\r\n        this.setPosterPos();\r\n        this.nextBtn.click(function () {\r\n            if (_self.rotateFlag) {\r\n                _self.rotateFlag = false;\r\n                _self.carouselRotate(\"left\");\r\n            }\r\n        });\r\n        this.prevBtn.click(function () {\r\n            if (_self.rotateFlag) {\r\n                _self.rotateFlag = false;\r\n                _self.carouselRotate(\"right\");\r\n            }\r\n\r\n        });\r\n    //    是否开启自动播放\r\n        if(this.setting.autoPlay) {\r\n            this.autoPlay();\r\n            this.poster.hover(function () {\r\n                window.clearInterval(_self.timer);\r\n            },function () {\r\n                _self.autoPlay();\r\n            })\r\n        }\r\n    };\r\n    Carousel.prototype = {\r\n        //自动播放\r\n        autoPlay:function () {\r\n           var _this = this;\r\n           this.timer = window.setInterval(function () {\r\n               _this.nextBtn.click();\r\n           },_this.setting.delay);\r\n        },\r\n        //旋转\r\n        carouselRotate: function (type) {\r\n            var _this = this;\r\n            var itemsArr = [];\r\n            this.posterItems.each(function () {\r\n                var self = $(this);\r\n                var item;\r\n                if (type === \"left\") {           /*向左旋转*/\r\n                    item = self.prev().get(0) ? self.prev() : _this.posterLastItem;\r\n                } else {                     /*向右旋转*/\r\n                    item = self.next().get(0) ? self.next() : _this.posterFirstItem;\r\n                }\r\n                var width = item.width(),\r\n                    height = item.height(),\r\n                    zIndex = item.css(\"zIndex\"),\r\n                    opacity = item.css(\"opacity\"),\r\n                    top = item.css(\"top\"),\r\n                    left = item.css('left');\r\n                /*保存每个幻灯片的前一个幻灯片的参数值*/\r\n                var itemObj = {\r\n                    width: width,\r\n                    height: height,\r\n                    zIndex: zIndex,\r\n                    opacity: opacity,\r\n                    left: left,\r\n                    top: top\r\n                };\r\n                itemsArr.push(itemObj);\r\n\r\n            });\r\n            //为每个幻灯片赋值其前一个幻灯片的参数值\r\n            this.posterItems.each(function(i){\r\n                $(this).animate({\r\n                    width: itemsArr[i].width,\r\n                    height: itemsArr[i].height,\r\n                    zIndex: itemsArr[i].zIndex,\r\n                    opacity: itemsArr[i].opacity,\r\n                    left: itemsArr[i].left,\r\n                    top: itemsArr[i].top\r\n                },_this.setting.speed,function () {\r\n                    _this.rotateFlag = true;\r\n                });\r\n            });\r\n        },\r\n        //获取人工配置参数\r\n        getSetting: function () {\r\n            var setting = this.poster.data(\"setting\");\r\n            if (setting && setting !== \"\") {\r\n                return setting;\r\n            } else {\r\n                return {}\r\n            }\r\n        },\r\n        //   设置配置参数值控制基本的宽高\r\n        setSettingValue: function () {\r\n            this.poster.css({\r\n                width: this.setting.width,\r\n                height: this.setting.height\r\n            });\r\n            this.posterItemMain.css({\r\n                width: this.setting.width,\r\n                height: this.setting.height\r\n            });\r\n            var w = (this.setting.width - this.setting.posterWidth) / 2;\r\n            this.prevBtn.css({\r\n                width: w,\r\n                height: this.setting.height,\r\n                zIndex: Math.ceil(this.zIndex)\r\n            });\r\n            this.nextBtn.css({\r\n                width: w,\r\n                height: this.setting.height,\r\n                zIndex: Math.ceil(this.zIndex)\r\n            });\r\n            this.posterFirstItem.css({\r\n                left: w,\r\n                width: this.setting.posterWidth,\r\n                height: this.setting.posterHeight,\r\n                zIndex: Math.floor(this.zIndex)\r\n            })\r\n        },\r\n        //设置剩余幻灯片位置\r\n        setPosterPos: function () {\r\n            var _self = this;\r\n            var sliceItems = this.posterItems.slice(1),\r\n                slength = sliceItems.length / 2,\r\n                rightItems = sliceItems.slice(0, slength),\r\n                leftItems = sliceItems.slice(slength),\r\n                scale = this.setting.scale,\r\n                level = Math.floor(slength);\r\n            var rw = this.setting.posterWidth,\r\n                rh = this.setting.posterHeight,\r\n                gap = (this.setting.width - this.setting.posterWidth) / (2 * level);\r\n            var firstLeft = (this.setting.width - this.setting.posterWidth) / 2;\r\n            var fixOffetLeft = firstLeft + rw;\r\n            rightItems.each(function (i) {\r\n                level--;\r\n                rw *= scale;\r\n                rh *= scale;\r\n                var j = i;\r\n                $(this).css({\r\n                    zIndex: level,\r\n                    width: rw,\r\n                    height: rh,\r\n                    opacity: 1 / (++i),\r\n                    left: fixOffetLeft + (++j) * gap - rw,\r\n                    top: _self.setVertualAlign(rh)\r\n                })\r\n            });\r\n            var lw = rightItems.last().width(), /*右边最后一张幻灯片宽度*/\r\n                lh = rightItems.last().height(), /*右边最后一张幻灯片高度*/\r\n                oloop = Math.floor(slength);\r\n            leftItems.each(function (i) {\r\n                var j = i;\r\n                $(this).css({\r\n                    zIndex: i,\r\n                    width: lw,\r\n                    height: lh,\r\n                    opacity: 1 / oloop,\r\n                    left: i * gap,\r\n                    top: _self.setVertualAlign(lh)\r\n                });\r\n                lw /= scale;\r\n                lh /= scale;\r\n                oloop--;\r\n            });\r\n        },\r\n        //    设置顶部对齐\r\n        setVertualAlign: function (height) {\r\n            var vertualType = this.setting.verticalAlign,\r\n                top = 0;\r\n            switch (vertualType) {\r\n                case \"top\":\r\n                    top = 0;\r\n                    break;\r\n                case \"middle\":\r\n                    top = (this.setting.height - height) / 2;\r\n                    break;\r\n                case \"bottom\":\r\n                    top = this.setting.height - height;\r\n                    break;\r\n                default:\r\n                    top = (this.setting.height - height) / 2;\r\n            }\r\n            return top;\r\n        }\r\n    };\r\n    Carousel.init = function (posters) {\r\n        var _this = this;\r\n        posters.each(function (i, ele) {\r\n            new _this($(this));\r\n        })\r\n    };\r\n    $.extend({\r\n        carousel:function (poster) {\r\n            Carousel.init(poster);\r\n        }\r\n    });\r\n    // window[\"Carousel\"] = Carousel;\r\n})(jQuery);"]}
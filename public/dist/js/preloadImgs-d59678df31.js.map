{"version":3,"sources":["preloadImgs.js"],"names":["$","Preload","imgs","options","this","Array","length","DEFAULTS","order","all","_unordered","prototype","len","that","i","src","count","Image","imgObj","opts","each","_ordered","load","console","log","extend","preload","pre","jQuery"],"mappings":"cAAC,SAAWA,GAAV,SAAAC,EAAaC,EAAAC,GAGPC,KAAKF,KAAQA,aAAgBG,MAAOH,GAAMA,GAD9CE,KAASH,OAAQC,EAAKC,OAClBA,GAAaD,KAAAA,IACbE,KAAKE,KAASJ,EAAAA,UAAdD,EAAAM,SAAAJ,IAGCF,EAAAM,UACJC,MAAA,YACDP,KAAQM,KACJC,IAAAA,MAEAC,EAAAA,UAAWC,WAAA,WAHf,IAAAR,EAAAE,KAAAF,KAKQS,EAAAA,KAAUD,OACVR,EAAOE,KACPQ,EAAM,EACVZ,EAAAE,GAAIW,KAAO,SAAXC,EAAAC,GACIC,IAAAA,EAAJ,IAAAC,MACa,iBAAAF,IACTf,EAAAkB,GAAIA,GAAS,WAAb,WAEEA,GADCL,EAAAM,KAAAC,MAAeP,EAAlBM,KAA4BC,KAAAJ,GAC1BE,GAAWN,EAAA,EACTC,OAAUO,EAAVD,KAAkBN,KAAKM,EAAKC,KAAKJ,MAE7BA,MAEJA,EAAAA,IAAAA,MAGPf,EAXDU,UAAAU,SAAA,WALJ,IAAAnB,EAAAE,KAAAF,KAkBQS,EAAAA,KAAUU,OACVnB,EAAOE,KACPQ,EAAM,GAEV,SAAII,IACJM,QAAAA,IAAAA,QACA,IAAAJ,EAAgB,IAAAD,MACZM,EAAAA,GAAQC,GAAI,WAAZ,WACIN,GAAAA,GAASN,EAAIK,EACjB,OAAaJ,EAAAM,KAAWV,KAAAI,EAAAM,KAAYV,MAE5BI,EAAAM,KAAON,MAAUJ,EAAVU,KAAeN,KAAAG,GAD1BA,IAGIH,MAKPK,EATDH,IAAAb,EAAAc,GANJM,IAsBJtB,EAAEyB,QACEC,QAAAA,SAAQxB,EAAAiB,GACJ,IAAIQ,EAAM,IAAI1B,EAAQC,EAAZiB,GACV,YAAGQ,EAAYA,KAAIR,MACfQ,EAAIN,WAEJM,EAAIjB,gBA/DnB,CAoEEkB","file":"preloadImgs-d59678df31.js","sourcesContent":[";(function ($) {\r\n\r\n    function Preload(imgs,options) {\r\n        this.imgs = (imgs instanceof Array)?imgs:[imgs];\r\n        this.length = imgs.length;\r\n        if(options&&options!==\"\") {\r\n            this.opts = $.extend({},Preload.DEFAULTS,options);\r\n        }\r\n    }\r\n    Preload.DEFAULTS = {\r\n        order:\"unordered\",\r\n        each:null, /*每张图片加载之后执行*/\r\n        all:null   /*所有图片加载之后执行*/\r\n    };\r\n    Preload.prototype._unordered = function () {\r\n        let imgs = this.imgs;\r\n        let len = this.length;\r\n        let that = this;\r\n        let count = 0;\r\n        $(imgs).each(function (i,src) {\r\n            let imgObj = new Image();\r\n            if(typeof src !== \"string\") return;\r\n            $(imgObj).on(\"load err\",function () {\r\n                that.opts.each && that.opts.each(count);\r\n                if(count>=len-1) {\r\n                    return that.opts.all&&that.opts.all();\r\n                }\r\n                count++;\r\n            });\r\n            imgObj.src = src;\r\n        });\r\n    };\r\n    Preload.prototype._ordered = function () {\r\n        let imgs = this.imgs;\r\n        let len = this.length;\r\n        let that = this;\r\n        let count = 0;\r\n        load();\r\n        function load() {\r\n            console.log(\"load\");\r\n            let imgObj = new Image();\r\n            $(imgObj).on(\"load err\",function () {\r\n                if(count>=len-1) {\r\n                    return that.opts.all&&that.opts.all();\r\n                } else {\r\n                    that.opts.each && that.opts.each(count);\r\n                    count++;\r\n                    load();\r\n                }\r\n\r\n            });\r\n            imgObj.src = imgs[count];\r\n        }\r\n\r\n    };\r\n\r\n    /* $.fn.extend() -> $(\"#imgs\").preload();*/\r\n    $.extend({\r\n        preload:function (imgs,opts) {\r\n            let pre = new Preload(imgs,opts);\r\n            if(\"ordered\"===pre.opts.order) {\r\n                pre._ordered();\r\n            } else {\r\n                pre._unordered();\r\n            }\r\n\r\n        }\r\n    });\r\n})(jQuery);"]}